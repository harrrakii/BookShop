"""
Команда для создания базовых FAQ
"""
from django.core.management.base import BaseCommand
from core.models import FAQ


class Command(BaseCommand):
    help = 'Создает базовые FAQ для чата поддержки'

    def handle(self, *args, **options):
        faqs_data = [
            {
                'question': 'Как оформить заказ?',
                'answer': 'Выберите товары, добавьте их в корзину, перейдите в корзину и нажмите "Оформить заказ". Заполните форму с вашими данными и выберите способ доставки.',
                'category': 'order',
                'order': 1,
            },
            {
                'question': 'Какие способы доставки доступны?',
                'answer': 'Мы предлагаем доставку курьером и самовывоз из пунктов выдачи. Сроки и стоимость доставки зависят от выбранного варианта и указаны при оформлении заказа.',
                'category': 'delivery',
                'order': 1,
            },
            {
                'question': 'Сколько стоит доставка?',
                'answer': 'Стоимость доставки зависит от выбранного способа и расстояния. При заказе от определенной суммы доставка может быть бесплатной. Точная стоимость отображается при оформлении заказа.',
                'category': 'delivery',
                'order': 2,
            },
            {
                'question': 'Как долго ждать доставку?',
                'answer': 'Сроки доставки зависят от выбранного способа и вашего региона. Обычно доставка занимает от 1 до 7 дней. Точные сроки указаны при выборе способа доставки.',
                'category': 'delivery',
                'order': 3,
            },
            {
                'question': 'Как отследить заказ?',
                'answer': 'После оформления заказа вы получите номер заказа и сможете отслеживать его статус в личном кабинете. Также мы отправим вам уведомления на email о смене статуса заказа.',
                'category': 'order',
                'order': 2,
            },
            {
                'question': 'Как вернуть товар?',
                'answer': 'Вы можете вернуть товар в течение 14 дней с момента получения, если он не был в употреблении и сохранены его товарный вид и упаковка. Для возврата свяжитесь с нами через форму поддержки или по email.',
                'category': 'return',
                'order': 1,
            },
            {
                'question': 'Какие способы оплаты доступны?',
                'answer': 'Мы принимаем оплату банковскими картами (Visa, MasterCard, МИР), а также наличными при получении заказа (для некоторых способов доставки).',
                'category': 'payment',
                'order': 1,
            },
            {
                'question': 'Безопасна ли оплата картой?',
                'answer': 'Да, все платежи обрабатываются через защищенные платежные системы. Мы не храним данные ваших банковских карт. Все транзакции защищены современными методами шифрования.',
                'category': 'payment',
                'order': 2,
            },
            {
                'question': 'Что такое программа лояльности?',
                'answer': 'Программа лояльности позволяет накапливать бонусы с каждой покупки. Бонусы можно использовать для оплаты следующих заказов. Чем больше вы покупаете, тем выше процент начисления бонусов.',
                'category': 'loyalty',
                'order': 1,
            },
            {
                'question': 'Как получить карту лояльности?',
                'answer': 'Карта лояльности автоматически создается при первой покупке. Вы получите уведомление на email с номером карты. Бонусы начисляются автоматически после завершения заказа.',
                'category': 'loyalty',
                'order': 2,
            },
            {
                'question': 'Как использовать бонусы?',
                'answer': 'При оформлении заказа вы можете выбрать опцию "Использовать бонусы" и указать сумму, которую хотите оплатить бонусами. Остаток суммы можно оплатить картой или наличными.',
                'category': 'loyalty',
                'order': 3,
            },
        ]

        created_count = 0
        for faq_data in faqs_data:
            faq, created = FAQ.objects.get_or_create(
                question=faq_data['question'],
                defaults={
                    'answer': faq_data['answer'],
                    'category': faq_data['category'],
                    'order': faq_data['order'],
                    'is_active': True,
                }
            )
            if created:
                created_count += 1
                self.stdout.write(
                    self.style.SUCCESS(f'Создан FAQ: {faq.question}')
                )
            else:
                self.stdout.write(
                    self.style.WARNING(f'FAQ уже существует: {faq.question}')
                )

        self.stdout.write(
            self.style.SUCCESS(f'\nСоздано {created_count} новых FAQ. Всего FAQ: {FAQ.objects.count()}')
        )

