<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Заказ оформлен — Lexicon</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    :root {
      --lavender-blue: #C6D4FF;
      --french-violet: #6F2DBD;
      --amethyst: #A663CC;
      --dark-liver: #594236;
      --umber: #6F584B;
    }
    
    body {
      background: linear-gradient(120deg, #f0f4ff, #f9fafb);
      font-family: "Inter", sans-serif;
      min-height: 100vh;
    }
    
    .success-card {
      max-width: 700px;
      margin: 80px auto;
      background: #fff;
      border-radius: 28px;
      box-shadow: 0 20px 50px rgba(15, 23, 42, 0.12);
      padding: 3rem;
    }
    
    .badge-soft {
      background: var(--lavender-blue);
      color: var(--french-violet);
      letter-spacing: .08em;
    }
    
    .btn-primary {
      background: var(--lavender-blue);
      border-color: var(--lavender-blue);
      color: var(--french-violet);
    }
    
    .btn-primary:hover {
      background: var(--french-violet);
      border-color: var(--french-violet);
      color: white;
    }
    
    @media (max-width: 768px) {
      .success-card {
        margin: 2rem 1rem;
        padding: 2rem;
        border-radius: 20px;
      }
    }
    
    @media (max-width: 576px) {
      .success-card {
        margin: 1rem 0.5rem;
        padding: 1.5rem;
        border-radius: 16px;
      }
      
      .display-1 {
        font-size: 3rem;
      }
    }
  </style>
</head>
<body>

{% include 'includes/header.html' %}

<div class="success-card text-center">
  <div class="display-1 mb-4">✅</div>
  <h1 class="fw-bold">Спасибо! Заказ оформлен</h1>
  <p class="text-muted">Номер вашего заказа: <strong>#{{ order.id }}</strong></p>

  <div class="mt-4 text-start">
    <h5 class="fw-semibold">Как мы доставим</h5>
    {% if order.fulfillment_type == "delivery" %}
      <p class="mb-1"><span class="badge badge-soft">{{ order.get_fulfillment_type_display }}</span></p>
      {% if order.delivery_option %}
        <p class="mb-1"><strong>Срок:</strong> {{ order.delivery_option }}</p>
      {% endif %}
      <p class="mb-0"><strong>Адрес:</strong> {{ order.delivery_address }}</p>
    {% else %}
      <p class="mb-1"><span class="badge badge-soft">{{ order.get_fulfillment_type_display }}</span></p>
      {% if order.pickup_point %}
        <p class="mb-1"><strong>ПВЗ:</strong> {{ order.pickup_point.name }}, {{ order.pickup_point.address }}, {{ order.pickup_point.city }}</p>
        {% if order.pickup_point.working_hours %}
          <p class="mb-0 text-muted"><strong>Время работы:</strong> {{ order.pickup_point.working_hours }}</p>
        {% endif %}
      {% endif %}
    {% endif %}
  </div>

  <hr class="my-4">

  <div class="text-start">
    <h5 class="fw-semibold">Состав заказа</h5>
    <ul class="list-group list-group-flush">
      {% for item in order.items.all %}
        <li class="list-group-item px-0 d-flex justify-content-between align-items-center">
          <div>
            <div class="fw-semibold">{{ item.name }}</div>
            <div class="text-muted small">{{ item.quantity }} шт. × {{ item.unit_price }} ₽</div>
          </div>
          <span class="fw-bold">{{ item.subtotal }} ₽</span>
        </li>
      {% endfor %}
    </ul>
    <div class="d-flex justify-content-between align-items-center mt-3">
      <span class="text-muted">Итого:</span>
      <span class="fs-4 fw-bold">{{ order.total_amount }} ₽</span>
    </div>
  </div>

  <div class="mt-5 d-flex flex-column flex-md-row gap-3 justify-content-center">
    <a href="{% url 'books_list' %}" class="btn btn-primary">Продолжить покупки</a>
    <a href="{% url 'home' %}" class="btn btn-outline-secondary">На главную</a>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
